<!DOCTYPE html>
<html>
  <head>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="container">
      <div class="row">
	<div class="col-xs-12">
	  <button id="update">Update the Chart!</button>
	  <div class="ct-chart ct-perfect-fourth"></div>
<script>
var myChart;
var getData = $.get('/data');

// graph only created when data is loaded
getData.done(function(results) {

  var data = {
  // A labels array that can contain any sort of values
    labels: results.xs,
  // Our series array that contains series objects or in this case series data arrays
    series: [
      results.yi
    ]
  };

  var options = {
    height: 800
  };

  // Create a new line chart object where as first parameter we pass in a selector
  // that is resolving to our chart container element. The Second parameter
  // is the actual data object.
  myChart = new Chartist.Line('.ct-chart', data, options);

});

function updateChart() {
  var updatedData = $.get('/data');
  updatedData.done(function(results) {

    var data = {
      // A labels array that can contain any sort of values
      labels: results.xs,
      // Our series array that contains series objects or in this case series data arrays
      series: [
        results.yi
      ]
    };
  
    myChart.update(data);

  });
}

$("#update").on('click', updateChart);

</script>
	  </div>
	</div>
      </div>
    </div>
  </body>
</html>
